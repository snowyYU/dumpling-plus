
import { Canvas, Story, ArgsTable, PRIMARY_STORY } from "@storybook/addon-docs"

# DpSchemaForm 配置表单
---
DpSchemaForm提供一个可配置的可编辑表单组件，主要依靠schema表单项配置、model数据集、*props配置透传字段以及custom-update数据更新事件配合，通过控制展示和更新数据以及数据验证来完成一个可编辑表单功能

### schema字段说明
* visible: 是否展示
* layoutProps: 布局col透传props
* formItemProps: form-item透传props
* fieldProps: 控件透传props
* key: 表单项item唯一值
* type: 类型
    * module-custom: 自定义，配合slot:`${item.key}-module-custom`
    * form-area-title: 配合formAreaTitleType
    * rawtext: 原始文本，直接展示item.key对应的值
    * input: 输入控件
    * autocomplete: 输入控件，可进行数据筛选
    * input-number: 限定数字输入
    * textarea: 文本框
    * select: 下拉框
    * cascader: 级联选择器
    * radio: 单选
    * checkbox: 多选
    * switch: 开关
    * time-select: 时间选择
    * time-picker: 时间选择器
    * date-picker: 日期选择器
    * upload: 上传
    * custom: 自定义，渲染插槽slot:`${item.key}-custom`
* customLabel: 自定义标签文本，配合slots#`${item.key}-custom-label`
* customError: 自定义表单域验证错误时的提示信息，配合slots#`${item.key}-custom-error`
* label: 标签
* formAreaTitleType: 当type:form-area-title时，展示的标题
* height: 当type:form-area-title时，标题元素的高度
* ref: 当type:cascader||upload时，可定义控件ref以便获取该控件元素

### 补充说明
* 标签宽度默认为100px
* type:select|cascader默认加上clearable清空功能
* type:date-picker中，fieldProps.type提供快捷值转化，规则为
    * year: YYYY
    * month: YYYY-MM
    * date: YYYY-MM-DD
    * dates: YYYY-MM-DD
    * datetime: YYYY-MM-DD HH:mm:ss
    * datetimerange: YYYY-MM-DD HH:mm:ss
    * daterange: YYYY-MM-DD
    * monthrange: YYYY-MM
* type:date-picker中，非范围类型（即type包含range字样），不提供默认placeholder，其他均提供


### 基础类型大全
展示出基本类型type
<Canvas>
  <Story id="dpschemaform-配置表单--base" />
</Canvas>

### 表单验证
* 通过设置schema.customLabel:ture并且配合slot:`${item.key}-custom`可自定义标签
* 通过设置schema.customError:ture并且配合slot:`${item.key}-error`可自定义错误信息内容
* 通过定义组件ref，可获取表单组件实例，通过实例可得表单验证事件：
    * validate: 验证全部表单
    * validateField: 传入string[]，可验证部分表单
    * clearValidate: 传入string[]，可清除部分表单验证错误信息，默认清除全部
    * resetFields: 重置全部表单数据并且清除错误信息

<Canvas>
  <Story id="dpschemaform-配置表单--validate" />
</Canvas>

### 日期选择器

<Canvas>
  <Story id="dpschemaform-配置表单--date-picker" />
</Canvas>

